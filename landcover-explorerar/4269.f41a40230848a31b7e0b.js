"use strict";(self.webpackChunkimagery_explorer_apps=self.webpackChunkimagery_explorer_apps||[]).push([[4269],{12065:function(t,e,n){n.d(e,{$:function(){return rt},$g:function(){return ot},EI:function(){return E},GH:function(){return B},IN:function(){return F},Iv:function(){return O},J6:function(){return k},Jd:function(){return w},Nh:function(){return K},RZ:function(){return W},Uy:function(){return j},XA:function(){return Q},Yn:function(){return U},cn:function(){return H},dd:function(){return D},di:function(){return J},eG:function(){return q},fQ:function(){return P},hY:function(){return st},h_:function(){return $},ks:function(){return z},lM:function(){return X},lz:function(){return ut},zj:function(){return tt}});var r=n(70375),o=n(13802),s=n(61681),i=n(37116),u=n(24568),a=n(53736),c=n(59958),l=n(61619),f=n(15540);function h(t,e){return t?e?4:3:e?3:2}const d=()=>o.Z.getLogger("esri.layers.graphics.featureConversionUtils"),m={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},p=(t,e,n,r,o,s)=>{t[n]=o,t[n+1]=s},y=(t,e,n,r,o,s)=>{t[n]=o,t[n+1]=s,t[n+2]=e[r+2]},g=(t,e,n,r,o,s)=>{t[n]=o,t[n+1]=s,t[n+2]=e[r+3]},_=(t,e,n,r,o,s)=>{t[n]=o,t[n+1]=s,t[n+2]=e[r+2],t[n+3]=e[r+3]};function b(t,e,n,r){if(t){if(n)return e&&r?_:y;if(e&&r)return g}else if(e&&r)return y;return p}function w({scale:t,translate:e},n){return Math.round((n-e[0])/t[0])}function F({scale:t,translate:e},n){return Math.round((e[1]-n)/t[1])}function x({scale:t,translate:e},n,r){return n*t[r]+e[r]}function P(t,e,n){return t?e?n?v(t):G(t):n?I(t):Z(t):null}function Z(t){const e=t.coords;return{x:e[0],y:e[1]}}function C(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function G(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function S(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function I(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function M(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function v(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function T(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function N(t,e){return t&&e?T:t?S:e?M:C}function D(t,e,n=N(null!=e.z,null!=e.m)){return n(t,e)}function O(t,e,n){if(null==t)return null;const r=h(e,n),o=[];for(let e=0;e<t.coords.length;e+=r){const n=[];for(let o=0;o<r;o++)n.push(t.coords[e+o]);o.push(n)}return e?n?{points:o,hasZ:e,hasM:n}:{points:o,hasZ:e}:n?{points:o,hasM:n}:{points:o}}function R(t,e,n=h(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const r=t.coords;let o=0;for(const t of e.points)for(let e=0;e<n;e++)r[o++]=t[e];return t}function k(t,e,n){if(!t)return null;const r=h(e,n),{coords:o,lengths:s}=t,i=[];let u=0;for(const t of s){const e=[];for(let n=0;n<t;n++){const t=[];for(let e=0;e<r;e++)t.push(o[u++]);e.push(t)}i.push(e)}return e?n?{paths:i,hasZ:e,hasM:n}:{paths:i,hasZ:e}:n?{paths:i,hasM:n}:{paths:i}}function V(t,e,n=h(e.hasZ,e.hasM)){const{lengths:r,coords:o}=t;let s=0;for(const t of e.paths){for(const e of t)for(let t=0;t<n;t++)o[s++]=e[t];r.push(t.length)}return t}function q(t,e,n){if(!t)return null;const r=h(e,n),{coords:o,lengths:s}=t,i=[];let u=0;for(const t of s){const e=[];for(let n=0;n<t;n++){const t=[];for(let e=0;e<r;e++)t.push(o[u++]);e.push(t)}i.push(e)}return e?n?{rings:i,hasZ:e,hasM:n}:{rings:i,hasZ:e}:n?{rings:i,hasM:n}:{rings:i}}function j(t,e,n=e.hasZ,r=e.hasM){return z(t,e.rings,n,r)}function z(t,e,n,r){const o=h(n,r),{lengths:s,coords:i}=t;let u=0;at(t);for(const t of e){for(const e of t)for(let t=0;t<o;t++)i[u++]=e[t];s.push(t.length)}return t}const A=[],L=[];function Q(t,e,n,r,o){A[0]=t;const[s]=U(L,A,e,n,r,o);return ct(A),ct(L),s}function U(t,e,n,o,s,i){if(ct(t),!n){for(const n of e){const e=i?n.attributes[i]:void 0;t.push(new c.u_(null,n.attributes,null,e))}return t}switch(n){case"esriGeometryPoint":return function(t,e,n,r,o){const s=N(n,r);for(const{geometry:n,attributes:r}of e){const e=null!=n?s(new f.Z,n):null;t.push(new c.u_(e,r,null,o?r[o]:void 0))}return t}(t,e,o,s,i);case"esriGeometryMultipoint":return function(t,e,n,r,o){const s=h(n,r);for(const{geometry:n,attributes:r}of e){const e=null!=n?R(new f.Z,n,s):null;t.push(new c.u_(e,r,null,o?r[o]:void 0))}return t}(t,e,o,s,i);case"esriGeometryPolyline":return function(t,e,n,r,o){const s=h(n,r);for(const{geometry:n,attributes:r,centroid:i}of e){const e=null!=n?V(new f.Z,n,s):null,u=null!=i?D(new f.Z,i):null;t.push(new c.u_(e,r,u,o?r[o]:void 0))}return t}(t,e,o,s,i);case"esriGeometryPolygon":return function(t,e,n,r,o){for(const{geometry:s,centroid:i,attributes:u}of e){const e=null!=s?j(new f.Z,s,n,r):null,a=o?u[o]:void 0;null!=i?t.push(new c.u_(e,u,C(new f.Z,i),a)):t.push(new c.u_(e,u,null,a))}return t}(t,e,o,s,i);default:d().error("convertToFeatureSet:unknown-geometry",new r.Z(`Unable to parse unknown geometry type '${n}'`)),ct(t)}return t}function E(t,e,n,r){L[0]=t,Y(A,L,e,n,r);const o=A[0];return ct(A),ct(L),o}function B(t,e,n){if(null==t)return null;const o=new f.Z;return"hasZ"in t&&null==e&&(e=t.hasZ),"hasM"in t&&null==n&&(n=t.hasM),(0,a.wp)(t)?N(null!=e?e:null!=t.z,null!=n?n:null!=t.m)(o,t):(0,a.oU)(t)?j(o,t,e,n):(0,a.l9)(t)?V(o,t,h(e,n)):(0,a.aW)(t)?R(o,t,h(e,n)):void d().error("convertFromGeometry:unknown-geometry",new r.Z(`Unable to parse unknown geometry type '${t}'`))}function J(t,e,n,o){const s=t&&("coords"in t?t:t.geometry);if(null==s)return null;switch(e){case"esriGeometryPoint":{let t=Z;return n&&o?t=v:n?t=G:o&&(t=I),t(s)}case"esriGeometryMultipoint":return O(s,n,o);case"esriGeometryPolyline":return k(s,n,o);case"esriGeometryPolygon":return q(s,n,o);default:return d().error("convertToGeometry:unknown-geometry",new r.Z(`Unable to parse unknown geometry type '${e}'`)),null}}function Y(t,e,n,o,s){if(ct(t),null==n)return function(t,e){for(const n of e)t.push({attributes:n.attributes});return t}(t,e);switch(n){case"esriGeometryPoint":return function(t,e,n,r){let o=Z;n&&r?o=v:n?o=G:r&&(o=I);for(const n of e){const{geometry:e,attributes:r}=n,s=null!=e?o(e):null;t.push({attributes:r,geometry:s})}return t}(t,e,o,s);case"esriGeometryMultipoint":return function(t,e,n,r){for(const{geometry:o,attributes:s}of e)t.push({attributes:s,geometry:null!=o?O(o,n,r):null});return t}(t,e,o,s);case"esriGeometryPolyline":return function(t,e,n,r){for(const{geometry:o,attributes:s}of e)t.push({attributes:s,geometry:null!=o?k(o,n,r):null});return t}(t,e,o,s);case"esriGeometryPolygon":return function(t,e,n,r){for(const{geometry:o,attributes:s,centroid:i}of e){const e=null!=o?q(o,n,r):null;if(null!=i){const n=Z(i);t.push({attributes:s,centroid:n,geometry:e})}else t.push({attributes:s,geometry:e})}return t}(t,e,o,s);default:d().error("convertToFeatureSet:unknown-geometry",new r.Z(`Unable to parse unknown geometry type '${n}'`))}return t}function H(t){const{objectIdFieldName:e,spatialReference:n,transform:r,fields:o,hasM:s,hasZ:i,features:u,geometryType:a,exceededTransferLimit:c,uniqueIdField:l,queryGeometry:f,queryGeometryType:h}=t,d={features:Y([],u,a,i,s),fields:o,geometryType:a,objectIdFieldName:e,spatialReference:n,uniqueIdField:l,queryGeometry:J(f,h,!1,!1)};return r&&(d.transform=r),c&&(d.exceededTransferLimit=c),s&&(d.hasM=s),i&&(d.hasZ=i),d}function $(t,e){const n=new l.Z,{hasM:o,hasZ:s,features:i,objectIdFieldName:u,spatialReference:a,geometryType:c,exceededTransferLimit:f,transform:h,fields:m}=t;return m&&(n.fields=m),n.geometryType=c??null,n.objectIdFieldName=u??e??null,n.spatialReference=a??null,n.objectIdFieldName?(i&&U(n.features,i,c,s,o,n.objectIdFieldName),f&&(n.exceededTransferLimit=f),o&&(n.hasM=o),s&&(n.hasZ=s),h&&(n.transform=h),n):(d().error(new r.Z("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),n)}function X(t){const{transform:e,features:n,hasM:r,hasZ:o}=t;if(!e)return t;for(const t of n)null!=t.geometry&&ot(t.geometry,t.geometry,r,o,e),null!=t.centroid&&ot(t.centroid,t.centroid,r,o,e);return t.transform=null,t}function W(t,e){const{geometryType:n,features:r,hasM:o,hasZ:s}=e;if(!t)return e;for(let e=0;e<r.length;e++){const i=r[e],u=i.weakClone();u.geometry=new f.Z,K(u.geometry,i.geometry,o,s,n,t),i.centroid&&(u.centroid=new f.Z,K(u.centroid,i.centroid,o,s,"esriGeometryPoint",t)),r[e]=u}return e.transform=t,e}function K(t,e,n,r,o,s,i=n,u=r){if(at(t),!e?.coords.length)return null;const a=m[o],{coords:c,lengths:l}=e,f=h(n,r),d=h(n&&i,r&&u),p=b(n,r,i,u);if(!l.length)return p(t.coords,c,0,0,w(s,c[0]),F(s,c[1])),at(t,f,0),t;let y,g,_,x,P=0,Z=0,C=Z;for(const e of l){if(e<a)continue;let n=0;Z=C,_=y=w(s,c[P]),x=g=F(s,c[P+1]),p(t.coords,c,Z,P,_,x),n++,P+=f,Z+=d;for(let r=1;r<e;r++,P+=f)_=w(s,c[P]),x=F(s,c[P+1]),_===y&&x===g||(p(t.coords,c,Z,P,_-y,x-g),Z+=d,n++,y=_,g=x);n>=a&&(t.lengths.push(n),C=Z)}return ct(t.coords,C),t.coords.length?t:null}function tt(t,e,n,r,o,s,i=n,u=r){if(at(t),!e?.coords.length)return null;const a=m[o],{coords:c,lengths:l}=e,f=h(n,r),d=h(n&&i,r&&u),p=b(n,r,i,u);if(!l.length)return p(t.coords,c,0,0,c[0],c[1]),at(t,f,0),t;let y=0;const g=s*s;for(const e of l){if(e<a){y+=e*f;continue}const n=t.coords.length/d,r=y,o=y+(e-1)*f;p(t.coords,c,t.coords.length,r,c[r],c[r+1]),nt(t.coords,c,f,g,p,r,o),p(t.coords,c,t.coords.length,o,c[o],c[o+1]);const s=t.coords.length/d-n;s>=a?t.lengths.push(s):ct(t.coords,n*d),y+=e*f}return t.coords.length?t:null}function et(t,e,n,r){const o=t[e],s=t[e+1],i=t[n],u=t[n+1],a=t[r],c=t[r+1];let l=i,f=u,h=a-l,d=c-f;if(0!==h||0!==d){const t=((o-l)*h+(s-f)*d)/(h*h+d*d);t>1?(l=a,f=c):t>0&&(l+=h*t,f+=d*t)}return h=o-l,d=s-f,h*h+d*d}function nt(t,e,n,r,o,s,i){let u,a=r,c=0;for(let t=s+n;t<i;t+=n)u=et(e,t,s,i),u>a&&(c=t,a=u);a>r&&(c-s>n&&nt(t,e,n,r,o,s,c),o(t,e,t.length,c,e[c],e[c+1]),i-c>n&&nt(t,e,n,r,o,c,i))}function rt(t,e,n,r){if(!e?.coords?.length)return null;const o=h(n,r);let s=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(e&&e.coords){const t=e.coords;for(let e=0;e<t.length;e+=o){const n=t[e],r=t[e+1];s=Math.min(s,n),c=Math.max(c,n),a=Math.min(a,r),l=Math.max(l,r)}}return(0,i.is)(t)?(0,i.bZ)(t,s,a,c,l):(0,u.al)(s,a,c,l,t),t}function ot(t,e,n,r,o){const{coords:i,lengths:u}=e,a=h(n,r);if(!i.length)return t!==e&&at(t),t;(0,s.O3)(o);const{originPosition:c,scale:l,translate:f}=o,d=lt;d.originPosition=c;const m=d.scale;m[0]=l[0]??1,m[1]=-(l[1]??1),m[2]=l[2]??1,m[3]=l[3]??1;const p=d.translate;if(p[0]=f[0]??0,p[1]=f[1]??0,p[2]=f[2]??0,p[3]=f[3]??0,!u.length){for(let e=0;e<a;++e)t.coords[e]=x(d,i[e],e);return t!==e&&at(t,a,0),t}let y=0;for(let e=0;e<u.length;e++){const n=u[e];t.lengths[e]=n;for(let e=0;e<a;++e)t.coords[y+e]=x(d,i[y+e],e);let r=t.coords[y],o=t.coords[y+1];y+=a;for(let e=1;e<n;e++,y+=a){r+=i[y]*m[0],o+=i[y+1]*m[1],t.coords[y]=r,t.coords[y+1]=o;for(let e=2;e<a;++e)t.coords[y+e]=x(d,i[y+e],e)}}return t!==e&&at(t,i.length,u.length),t}function st(t,e,n,r,o,s){if(at(t),t.lengths.push(...e.lengths),n===o&&r===s)for(let n=0;n<e.coords.length;n++)t.coords.push(e.coords[n]);else{const i=h(n,r),u=b(n,r,o,s),a=e.coords;for(let e=0;e<a.length;e+=i)u(t.coords,a,t.coords.length,e,a[e],a[e+1])}return t}function it(t,e,n,r){let o=0,s=t[r*e],i=t[r*(e+1)];for(let u=1;u<n;u++){const n=s+t[r*(e+u)],a=i+t[r*(e+u)+1],c=(n-s)*(a+i);s=n,i=a,o+=c}return.5*o}function ut(t,e){const{coords:n,lengths:r}=t;let o=0,s=0;for(let t=0;t<r.length;t++){const i=r[t];s+=it(n,o,i,e),o+=i}return Math.abs(s)}function at(t,e=0,n=0){ct(t.lengths,n),ct(t.coords,e)}function ct(t,e=0){t.length!==e&&(t.length=e)}const lt={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]}},44269:function(t,e,n){n.d(e,{Z:function(){return P}});var r=n(36663),o=n(74396),s=n(70375),i=n(39994),u=n(78668),a=n(3466),c=n(81977),l=(n(13802),n(4157),n(40266)),f=n(13449),h=n(10743),d=n(84238),m=n(78254),p=(n(91957),n(28500)),y=n(14136),g=n(91772);var _=n(13865),b=n(96027),w=n(28930),F=n(51211);let x=class extends o.Z{constructor(t){super(t),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return(0,a.mN)(this.url)}async execute(t,e){const n=await this.executeJSON(t,e);return this.featureSetFromJSON(t,n,e)}async executeJSON(t,e){const n=this._normalizeQuery(t),r=null!=t.outStatistics?.[0],o=(0,i.Z)("featurelayer-pbf-statistics"),s=!r||o;let u;if(this.pbfSupported&&s)try{u=await(0,w.t)(this.url,n,e)}catch(t){if("query:parsing-pbf"!==t.name)throw t;this.pbfSupported=!1}return this.pbfSupported&&s||(u=await(0,b.F)(this.url,n,e)),this._normalizeFields(u.fields),u}async featureSetFromJSON(t,e,r){if(!this._queryIs3DObjectFormat(t)||null==this.infoFor3D||!e.features)return F.Z.fromJSON(e);const{meshFeatureSetFromJSON:o}=await(0,u.Hl)(Promise.all([n.e(3190),n.e(7518),n.e(4630)]).then(n.bind(n,84095)),r);return o(t,this.infoFor3D,e)}executeForCount(t,e){return(0,m.P)(this.url,this._normalizeQuery(t),e)}executeForExtent(t,e){return async function(t,e,n){const r=(0,d.en)(t),o=await(0,p.Vr)(r,y.Z.from(e),{...n}),s=o.data.extent;return!s||isNaN(s.xmin)||isNaN(s.ymin)||isNaN(s.xmax)||isNaN(s.ymax)?{count:o.data.count,extent:null}:{count:o.data.count,extent:g.Z.fromJSON(s)}}(this.url,this._normalizeQuery(t),e)}executeForIds(t,e){return(0,_.G)(this.url,this._normalizeQuery(t),e)}async executeRelationshipQuery(t,e){const[{default:r},{executeRelationshipQuery:o}]=await(0,u.Hl)(Promise.all([Promise.resolve().then(n.bind(n,8284)),n.e(1007).then(n.bind(n,71007))]),e);return t=r.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),o(this.url,t,e)}async executeRelationshipQueryForCount(t,e){const[{default:r},{executeRelationshipQueryForCount:o}]=await(0,u.Hl)(Promise.all([Promise.resolve().then(n.bind(n,8284)),n.e(1007).then(n.bind(n,71007))]),e);return t=r.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),o(this.url,t,e)}async executeAttachmentQuery(t,e){const{executeAttachmentQuery:r,fetchAttachments:o,processAttachmentQueryResult:s}=await(0,u.Hl)(n.e(7714).then(n.bind(n,57714)),e),i=(0,d.en)(this.url);return s(i,await(this.queryAttachmentsSupported?r(i,t,e):o(i,t,e)))}async executeTopFeaturesQuery(t,e){const{executeTopFeaturesQuery:r}=await(0,u.Hl)(n.e(846).then(n.bind(n,30846)),e);return r(this.parsedUrl,t,this.sourceSpatialReference,e)}async executeForTopIds(t,e){const{executeForTopIds:r}=await(0,u.Hl)(n.e(895).then(n.bind(n,70895)),e);return r(this.parsedUrl,t,e)}async executeForTopExtents(t,e){const{executeForTopExtents:r}=await(0,u.Hl)(n.e(3734).then(n.bind(n,23734)),e);return r(this.parsedUrl,t,e)}async executeForTopCount(t,e){const{executeForTopCount:r}=await(0,u.Hl)(n.e(8943).then(n.bind(n,58943)),e);return r(this.parsedUrl,t,e)}_normalizeQuery(t){let e=y.Z.from(t);e.sourceSpatialReference=e.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(e=e===t?e.clone():e,e.gdbVersion=t.gdbVersion||this.gdbVersion,e.dynamicDataSource=t.dynamicDataSource?h.n.from(t.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:n}=this;if(null!=n&&this._queryIs3DObjectFormat(t)){e=e===t?e.clone():e,e.formatOf3DObjects=null;const{supportedFormats:r,queryFormats:o}=n,i=(0,f.S0)("model/gltf-binary",r)??(0,f.Ow)("glb",r),u=(0,f.S0)("model/gltf+json",r)??(0,f.Ow)("gltf",r);for(const t of o){if(t===i){e.formatOf3DObjects=t;break}t!==u||e.formatOf3DObjects||(e.formatOf3DObjects=t)}if(!e.formatOf3DObjects)throw new s.Z("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(null==e.outFields||!e.outFields.includes("*")){e=e===t?e.clone():e,null==e.outFields&&(e.outFields=[]);const{originX:r,originY:o,originZ:s,translationX:i,translationY:u,translationZ:a,scaleX:c,scaleY:l,scaleZ:f,rotationX:h,rotationY:d,rotationZ:m,rotationDeg:p}=n.transformFieldRoles;e.outFields.push(r,o,s,i,u,a,c,l,f,h,d,m,p)}}return e}_normalizeFields(t){if(null!=this.fieldsIndex&&null!=t)for(const e of t){const t=this.fieldsIndex.get(e.name);t&&Object.assign(e,t.toJSON())}}_queryIs3DObjectFormat(t){return null!=this.infoFor3D&&!0===t.returnGeometry&&"xyFootprint"!==t.multipatchOption&&!t.outStatistics}};(0,r._)([(0,c.Cb)({type:h.n})],x.prototype,"dynamicDataSource",void 0),(0,r._)([(0,c.Cb)()],x.prototype,"fieldsIndex",void 0),(0,r._)([(0,c.Cb)()],x.prototype,"gdbVersion",void 0),(0,r._)([(0,c.Cb)()],x.prototype,"infoFor3D",void 0),(0,r._)([(0,c.Cb)({readOnly:!0})],x.prototype,"parsedUrl",null),(0,r._)([(0,c.Cb)()],x.prototype,"pbfSupported",void 0),(0,r._)([(0,c.Cb)()],x.prototype,"queryAttachmentsSupported",void 0),(0,r._)([(0,c.Cb)()],x.prototype,"sourceSpatialReference",void 0),(0,r._)([(0,c.Cb)({type:String})],x.prototype,"url",void 0),x=(0,r._)([(0,l.j)("esri.tasks.QueryTask")],x);const P=x},13449:function(t,e,n){n.d(e,{$6:function(){return p},$z:function(){return s},F7:function(){return o},Ow:function(){return u},S0:function(){return i},d1:function(){return a},dm:function(){return c}});const r=[["binary","application/octet-stream","bin",""]];function o(t,e){return null!=f(e.name,t?.supportedFormats??[])}function s(t,e){if(!t)return!1;const n=c(e,t.supportedFormats??[]);return null!=n&&t.editFormats.includes(n)}function i(t,e){return h(function(t,e){const n=t.toLowerCase();return l(e).find((t=>d(t)===n))}(t,e))}function u(t,e){return h(f(t,e))}function a(t,e){return d(function(t,e){return l(e).find((e=>h(e)===t))}(t,e))}function c(t,e){return u(t.name,e)??i(t.type,e)}function l(t){return[...r,...t]}function f(t,e){const n=t.toLowerCase();return l(e).find((t=>m(t).some((t=>n.endsWith(t)))))}function h(t){return t?.[0]}function d(t){return t?.[1].toLowerCase()}function m(t){return t?.[2].split(",").map((t=>t.toLowerCase()))??[]}function p(t){return t.tables?.find((t=>"assetMaps"===t.role))}},28930:function(t,e,n){n.d(e,{t:function(){return y}});var r=n(84238),o=n(61681),s=n(95247),i=n(12065);function u(t,e){return e}function a(t,e,n,r){switch(n){case 0:return h(t,e+r,0);case 1:return"lowerLeft"===t.originPosition?h(t,e+r,1):function({translate:t,scale:e},n,r){return t[r]-n*e[r]}(t,e+r,1)}}function c(t,e,n,r){return 2===n?h(t,e,2):a(t,e,n,r)}function l(t,e,n,r){return 2===n?0===e?0:h(t,e,3):a(t,e,n,r)}function f(t,e,n,r){return 3===n?0===e?0:h(t,e,3):c(t,e,n,r)}function h({translate:t,scale:e},n,r){return t[r]+n*e[r]}class d{constructor(t){this._options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=u,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(t){if(this._options.applyTransform&&(t.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!t.hasZ)return;const e=(0,s.k)(t.geometryType,this._options.sourceSpatialReference,t.spatialReference);if(null!=e)for(const n of t.features)e(n.geometry)}createSpatialReference(){return{}}addField(t,e){const n=t.fields;(0,o.O3)(n),n.push(e);const r=n.map((t=>t.name));this._attributesConstructor=function(){for(const t of r)this[t]=null}}addFeature(t,e){t.features.push(e)}prepareFeatures(t){switch(this._transform=t.transform,this._options.applyTransform&&t.transform&&(this._applyTransform=this._deriveApplyTransform(t)),this._mValueOffset=null,this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),t.geometryType){case"esriGeometryPoint":this.addCoordinate=(t,e,n)=>this.addCoordinatePoint(t,e,n),this.createGeometry=t=>this.createPointGeometry(t);break;case"esriGeometryPolygon":this.addCoordinate=(t,e,n)=>this._addCoordinatePolygon(t,e,n),this.createGeometry=t=>this._createPolygonGeometry(t);break;case"esriGeometryPolyline":this.addCoordinate=(t,e,n)=>this._addCoordinatePolyline(t,e,n),this.createGeometry=t=>this._createPolylineGeometry(t);break;case"esriGeometryMultipoint":this.addCoordinate=(t,e,n)=>this._addCoordinateMultipoint(t,e,n),this.createGeometry=t=>this._createMultipointGeometry(t)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(t,e,n){0===this._lengths.length&&(this._toAddInCurrentPath=e),this._lengths.push(e)}addQueryGeometry(t,e){const{queryGeometry:n,queryGeometryType:r}=e,o=(0,i.$g)(n.clone(),n,!1,!1,this._transform),s=(0,i.di)(o,r,!1,!1);t.queryGeometryType=r,t.queryGeometry={...s}}createPointGeometry(t){const e={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(e.z=0),t.hasM&&(e.m=0),e}addCoordinatePoint(t,e,n){const r=this._transform;switch(e=this._applyTransform(r,e,n,0),n){case 0:t.x=e;break;case 1:t.y=e;break;case 2:"z"in t?t.z=e:t.m=e;break;case 3:t.m=e}}_transformPathLikeValue(t,e){let n=0;e<=1&&(n=this._previousCoordinate[e],this._previousCoordinate[e]+=t);const r=this._transform;return null===this._mValueOffset||0!==t||e%this._mValueOffset?this._applyTransform(r,t,e,n):0}_addCoordinatePolyline(t,e,n){this._dehydratedAddPointsCoordinate(t.paths,e,n)}_addCoordinatePolygon(t,e,n){this._dehydratedAddPointsCoordinate(t.rings,e,n)}_addCoordinateMultipoint(t,e,n){0===n&&t.points.push([]);const r=this._transformPathLikeValue(e,n);t.points[t.points.length-1].push(r)}_createPolygonGeometry(t){return{rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,e,n){0===n&&0==this._toAddInCurrentPath--&&(t.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const r=this._transformPathLikeValue(e,n),o=t[t.length-1];0===n&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),o.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=r}_deriveApplyTransform(t){const{hasZ:e,hasM:n}=t;return e&&n?f:e?c:n?l:a}}var m=n(28500),p=(n(51211),n(14136));async function y(t,e,n){const o=(0,r.en)(t),s={...n},i=p.Z.from(e),u=!i.quantizationParameters,{data:a}=await(0,m.qp)(o,i,new d({sourceSpatialReference:i.sourceSpatialReference,applyTransform:u}),s);return a}}}]);